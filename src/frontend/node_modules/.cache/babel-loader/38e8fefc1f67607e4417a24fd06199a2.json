{"remainingRequest":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/babel-loader/lib/index.js!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/IncidentDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/IncidentDetail.vue","mtime":1616938056895},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9HYWJlL0Rlc2t0b3AvcHJvamV0X2phdmEvUHJvamVjdEphdmFDZXNpL3NyYy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkluY2lkZW50RGV0YWlsIiwKICBwcm9wczogWydpZCddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbmNpZGVudDogbnVsbCwKICAgICAgY29tbWVudHM6IG51bGwsCiAgICAgIHN1cGVyYmVpbmdzOiBudWxsLAogICAgICBjaXZpbHM6IG51bGwsCiAgICAgIG9yZ2FuaXNhdGlvbnM6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyAxCiAgICBnZXRJbmNpZGVudERldGFpbHM6IGZ1bmN0aW9uIGdldEluY2lkZW50RGV0YWlscygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCIvc2hpZWxkL2luY2lkZW50LyIgKyBfdGhpcy5pZCwgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiI6ICIqIiwKICAgICAgICAgICAgICAgICAgICAiQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMiOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmluY2lkZW50ID0gcmVzcG9uc2UuZGF0YS5pbmNpZGVudDsKICAgICAgICAgICAgICAgICAgX3RoaXMuY29tbWVudHMgPSByZXNwb25zZS5kYXRhLmNvbW1lbnRzOwogICAgICAgICAgICAgICAgICBfdGhpcy5zdXBlcmJlaW5ncyA9IHJlc3BvbnNlLmRhdGEuc3VwZXJiZWluZ3M7CiAgICAgICAgICAgICAgICAgIF90aGlzLmNpdmlscyA9IHJlc3BvbnNlLmRhdGEuY2l2aWxzOwogICAgICAgICAgICAgICAgICBfdGhpcy5vcmdhbmlzYXRpb25zID0gcmVzcG9uc2UuZGF0YS5vcmdhbmlzYXRpb25zOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLzIKICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuZ2V0SW5jaWRlbnREZXRhaWxzKCk7CiAgICB9LAogICAgLy8gMwogICAgYmFja3dhcmQ6IGZ1bmN0aW9uIGJhY2t3YXJkKCkgewogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgfSwKICAgIC8vNAogICAgZm9ybWF0X2RhdGU6IGZ1bmN0aW9uIGZvcm1hdF9kYXRlKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIHJldHVybiBtb21lbnQoU3RyaW5nKHZhbHVlKSkuZm9ybWF0KCdERC9NTS9ZWVlZJyk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNyZWF0ZWQoKTsKICB9Cn07"},{"version":3,"sources":["/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/IncidentDetail.vue"],"names":[],"mappings":";;AAiFA,OAAO,MAAP,MAAmB,QAAnB;AACA,OAAO,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,gBADO;AAEb,EAAA,KAAK,EAAE,CAAC,IAAD,CAFM;AAGb,EAAA,IAHa,kBAGN;AACL,WAAO;AACL,MAAA,QAAQ,EAAE,IADL;AAEL,MAAA,QAAQ,EAAE,IAFL;AAGL,MAAA,WAAW,EAAE,IAHR;AAIL,MAAA,MAAM,EAAE,IAJH;AAKL,MAAA,aAAa,EAAE;AALV,KAAP;AAOD,GAXY;AAYb,EAAA,OAAO,EAAE;AACP;AACM,IAAA,kBAFC,gCAEoB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACnB,KAAK,CAAC,GAAN,CAAU,sBAAsB,KAAI,CAAC,EAArC,EAAyC;AAC7C,kBAAA,OAAO,EAAE;AACP,mDAA+B,GADxB;AAEP,wDAAoC,IAF7B;AAGP,oBAAA,aAAa,EAAE,YAAY,YAAY,CAAC,OAAb,CAAqB,OAArB;AAHpB;AADoC,iBAAzC,EAOD,IAPC,CAOI,UAAA,QAAO,EAAK;AAChB,kBAAA,KAAI,CAAC,QAAL,GAAgB,QAAQ,CAAC,IAAT,CAAc,QAA9B;AACA,kBAAA,KAAI,CAAC,QAAL,GAAgB,QAAQ,CAAC,IAAT,CAAc,QAA9B;AACA,kBAAA,KAAI,CAAC,WAAL,GAAmB,QAAQ,CAAC,IAAT,CAAc,WAAjC;AACA,kBAAA,KAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAT,CAAc,MAA5B;AACA,kBAAA,KAAI,CAAC,aAAL,GAAqB,QAAQ,CAAC,IAAT,CAAc,aAAnC;AACD,iBAbC,EAcD,KAdC,CAcK,UAAA,GAAE;AAAA,yBAAK,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,OAAhB,CAAL;AAAA,iBAdP,CADmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgB1B,KAlBM;AAmBP;AACA,IAAA,OApBO,qBAoBG;AACR,WAAK,kBAAL;AAED,KAvBM;AAwBP;AACA,IAAA,QAzBO,sBAyBI;AACT,WAAK,OAAL,CAAa,EAAb,CAAgB,CAAC,CAAjB;AACD,KA3BM;AA4BP;AACA,IAAA,WA7BO,uBA6BK,KA7BL,EA6BY;AACjB,UAAI,KAAJ,EAAW;AACT,eAAO,MAAM,CAAC,MAAM,CAAC,KAAD,CAAP,CAAN,CAAsB,MAAtB,CAA6B,YAA7B,CAAP;AACF;AACF;AAjCO,GAZI;AAgDb,EAAA,OAhDa,qBAgDH;AACR,SAAK,OAAL;AACF;AAlDa,CAAf","sourcesContent":["<template>\n\n  <div class=\"page-content p-5\">\n    <button @click=\"backward\" class=\"back-btn btn btn-secondary mb-2\">Retour</button>\n    <div class=\"grid-container\">\n      <div class=\"incident-information\">\n        <div class=\"info-nav pl-2 text-white\">INFORMATIONS</div>\n        <div class=\"info-content px-2 grid-container-incident-info\" v-if=\"incident\">\n          <div class=\"grid-item grid-item-1\"><span>RÉFÉRENCE : </span><span>{{ incident.ref }}</span></div>\n          <div class=\"grid-item grid-item-2\"><span>DATE DE DÉBUT : </span><span>{{\n              format_date(incident.startDate)\n            }}</span></div>\n          <div class=\"grid-item grid-item-3\">\n            <span>DATE DE FIN : </span><span>{{ incident.endDate ? format_date(incident.endDate) : ' -' }}</span></div>\n          <div class=\"grid-item grid-item-4\"><span>STATUT : </span><span>{{ incident.status }}</span></div>\n          <div class=\"grid-item grid-item-5\"><span>DANGEROSITÉ : </span><span>{{ incident.dangerousness }}%</span></div>\n          <div class=\"grid-item grid-item-6\"><span>RÉSOLU : </span><span\n              :class=\"incident.solved ? 'text-success' : 'text-danger'\"> {{ incident.solved ? 'OUI' : 'NON' }}</span>\n          </div>\n          <div class=\"grid-item grid-item-7\"><span>DÉCLARÉE PAR : </span><span>{{ incident.declaredBy }}</span></div>\n          <div class=\"grid-item grid-item-8\"><span>RÉDIGÉE PAR : </span><span>{{ incident.redactedBy }}</span></div>\n          <div class=\"grid-item grid-item-9\"><span>TYPE D'INCIDENT : </span><span>{{ incident.eventType }}</span></div>\n        </div>\n        <div class=\"info-content px-2\" v-else>No informations available for this incident</div>\n      </div>\n      <div class=\"comment-information\">\n        <table class=\"table table-bordered table-hover table-sm\" id=\"comment-table\">\n          <thead class=\"text-light\">\n          <tr>\n            <th scope=\"col\">COMMENTAIRES</th>\n          </tr>\n          </thead>\n\n          <tbody class=\"table-striped\" v-if=\"comments\">\n          <tr v-for=\"comment in comments\" :key=\"comment.id\">\n            <td>{{ comment.comments }}</td>\n          </tr>\n          </tbody>\n          <tbody class=\"table-striped\" v-else>\n          <tr>\n            <td colspan=\"7\">Aucun incident pour l'instant</td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"superhero-information\" v-if=\"superbeings\">\n        <div class=\"info-nav pl-2 text-white\">SUPERBEINGS</div>\n        <div v-for=\"superbeing in superbeings\" :key=\"superbeing.id\">\n          <div class=\"\"> {{ superbeing.name }}</div>\n        </div>\n      </div>\n      <div class=\"superhero-information\" v-else>\n        <div class=\"info-nav pl-2 text-white\">SUPER-HÉROS</div>\n      <div class=\"info-content px-2\" >No informations available for this incident</div>\n      </div>\n      <div class=\"civil-information\" v-if=\"civils\">\n        <div class=\"info-nav pl-2 text-white\">CIVILS</div>\n        <div v-for=\"civil in civils\" :key=\"civil.id\">\n          <div class=\"\"> {{ civil.firstname }} {{ civil.lastname }}</div>\n        </div>\n      </div>\n      <div class=\"civil-information\" v-else>\n        <div class=\"info-nav pl-2 text-white\">SUPER-HÉROS</div>\n      <div class=\"info-content px-2\" >No informations available for this incident</div>\n      </div>\n      <div class=\"organisation-information\" v-if=\"organisations\">\n        <div class=\"info-nav pl-2 text-white\">ORGANISATIONS</div>\n        <div v-for=\"organisation in organisations\" :key=\"organisation.id\">\n          <div class=\"\"> {{ organisation.name }}</div>\n        </div>\n      </div>\n      <div class=\"organisation-information\" v-else>\n        <div class=\"info-nav pl-2 text-white\">SUPER-HÉROS</div>\n      <div class=\"info-content px-2\" >No informations available for this incident</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport moment from \"moment\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"IncidentDetail\",\n  props: ['id'],\n  data() {\n    return {\n      incident: null,\n      comments: null,\n      superbeings: null,\n      civils: null,\n      organisations: null,\n    }\n  },\n  methods: {\n    // 1\n    async getIncidentDetails() {\n      await axios.get(\"/shield/incident/\" + this.id, {\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Credentials\": true,\n          Authorization: 'Bearer ' + localStorage.getItem(\"token\"),\n        }\n      })\n          .then(response => {\n            this.incident = response.data.incident;\n            this.comments = response.data.comments;\n            this.superbeings = response.data.superbeings;\n            this.civils = response.data.civils;\n            this.organisations = response.data.organisations;\n          })\n          .catch(err => console.log(err.message));\n    },\n    //2\n    created() {\n      this.getIncidentDetails();\n\n    },\n    // 3\n    backward() {\n      this.$router.go(-1)\n    },\n    //4\n    format_date(value) {\n      if (value) {\n        return moment(String(value)).format('DD/MM/YYYY')\n      }\n    }\n\n  },\n  mounted() {\n    this.created();\n  }\n}\n</script>\n\n<style>\n.table > thead {\n  background-color: #132141;\n}\n\n.grid-container {\n  display: grid;\n  gap: 20px 20px;\n  grid-template-areas:\n    \"incident organisation organisation\"\n    \"comment civil superbeing\";\n}\n\n.incident-information {\n  grid-area: incident;\n}\n.comment-information {\n  grid-area: comment;\n}\n.superhero-information {\n  grid-area: superbeing;\n}\n.civil-information {\n  grid-area: civil;\n}\n.organisation-information {\n  grid-area: organisation;\n}\n\n\n.grid-container-incident-info {\n  display: grid;\n  gap: 10px 20px;\n  grid-template-areas:\n    \"first1 second1\"\n    \"first2 second2\"\n    \"first3 second3\"\n    \"first4 second4\"\n    \"first5 second5\"\n    \"first6 second6\"\n    \"first7 second7\"\n    \"first8 second8\"\n    \"first9 second9\"\n}\n\n.grid-item-1 {\n  grid-area: first1;\n}\n\n.grid-item-1 > span:nth-child(2) {\n  font-weight: bold;\n}\n\n.grid-item-2 {\n  grid-area: first2;\n}\n\n.grid-item-3 {\n  grid-area: first3;\n}\n\n.grid-item-4 {\n  grid-area: first4;\n}\n\n.grid-item-5 {\n  grid-area: first5;\n}\n\n.grid-item-6 {\n  grid-area: first6;\n}\n\n.grid-item-7 {\n  grid-area: second1;\n}\n\n.grid-item-8 {\n  grid-area: second2;\n}\n\n.grid-item-9 {\n  grid-area: second3;\n}\n\n.info-nav {\n  height: 50px;\n  background-color: #132141;\n  display: flex;\n  align-items: center;\n}\n\n</style>\n"],"sourceRoot":""}]}