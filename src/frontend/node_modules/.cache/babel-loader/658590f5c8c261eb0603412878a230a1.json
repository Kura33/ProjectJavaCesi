{"remainingRequest":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/babel-loader/lib/index.js!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/Incident.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/Incident.vue","mtime":1616364007128},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJJbmNpZGVudCIsCiAgZWw6ICIjaW5jaWRlbnQtdGFibGUiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbmNpZGVudHM6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLzEKICAgIGdldEluY2lkZW50RGF0YTogZnVuY3Rpb24gZ2V0SW5jaWRlbnREYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZmV0Y2goIi9zaGllbGQvaW5jaWRlbnQvIikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgdmFyIGluY2lkZW50TGlzdCA9IFtdOwogICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbiAoaW5jaWRlbnQpIHsKICAgICAgICAgIGluY2lkZW50TGlzdC5wdXNoKGRhdGFbaW5jaWRlbnRdKTsKICAgICAgICB9KTsKICAgICAgICBfdGhpcy5pbmNpZGVudHMgPSBpbmNpZGVudExpc3Q7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpOwogICAgICB9KTsKICAgIH0sCiAgICAvLzIKICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuZ2V0SW5jaWRlbnREYXRhKCk7CiAgICB9LAogICAgLy8zCiAgICBmb3JtYXRfZGF0ZTogZnVuY3Rpb24gZm9ybWF0X2RhdGUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIG1vbWVudChTdHJpbmcodmFsdWUpKS5mb3JtYXQoJ0REL01NL1lZWVknKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuY3JlYXRlZCgpOwogIH0KfTs="},{"version":3,"sources":["/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/Incident.vue"],"names":[],"mappings":";AAgDA,OAAO,CAAP,MAAc,QAAd;AACA,OAAO,MAAP,MAAmB,QAAnB;AAGA,eAAe;AACb,EAAA,IAAI,EAAE,UADO;AAEb,EAAA,EAAE,EAAE,iBAFS;AAGb,EAAA,IAHa,kBAGN;AACL,WAAO;AACL,MAAA,SAAS,EAAE;AADN,KAAP;AAGD,GAPY;AAQb,EAAA,OAAO,EAAE;AACP;AACA,IAAA,eAFO,6BAEW;AAAA;;AAChB,MAAA,KAAK,CAAC,mBAAD,CAAL,CACK,IADL,CACU,UAAA,QAAO;AAAA,eAAK,QAAQ,CAAC,IAAT,EAAL;AAAA,OADjB,EAEK,IAFL,CAEU,UAAC,IAAD,EAAU;AACd,YAAI,YAAW,GAAI,EAAnB;AACA,QAAA,CAAC,CAAC,IAAF,CAAO,IAAP,EAAa,UAAC,QAAD,EAAc;AACzB,UAAA,YAAY,CAAC,IAAb,CAAkB,IAAI,CAAC,QAAD,CAAtB;AACD,SAFD;AAGA,QAAA,KAAI,CAAC,SAAL,GAAiB,YAAjB;AACD,OARL,EASK,KATL,CASW,UAAA,GAAE;AAAA,eAAK,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,OAAhB,CAAL;AAAA,OATb;AAUD,KAbM;AAcP;AACA,IAAA,OAfO,qBAeG;AACR,WAAK,eAAL;AAED,KAlBM;AAmBP;AACA,IAAA,WApBO,uBAoBK,KApBL,EAoBY;AACjB,UAAI,KAAJ,EAAW;AACT,eAAO,MAAM,CAAC,MAAM,CAAC,KAAD,CAAP,CAAN,CAAsB,MAAtB,CAA6B,YAA7B,CAAP;AACF;AACF;AAxBO,GARI;AAkCb,EAAA,OAlCa,qBAkCH;AACR,SAAK,OAAL;AACF;AApCa,CAAf","sourcesContent":["<template>\n  <h1>CODE COULEUR POUR DANGEROSITE ET RESOLU</h1>\n  <div class=\"p-5 table-responsive\">\n    <table class=\"table table-bordered table-hover table-sm\" id=\"incident-table\">\n      <thead class=\"thead-dark text-light\">\n      <tr>\n        <th scope=\"col\">Référence</th>\n        <th scope=\"col\">Timeframe de l'incident</th>\n        <th scope=\"col\">Statut</th>\n        <th scope=\"col\" >Dangerosité</th>\n        <th scope=\"col\">Type d'incident</th>\n        <th scope=\"col\">Résolu</th>\n        <th scope=\"col\">Actions</th>\n      </tr>\n      </thead>\n\n      <tbody class=\"table-striped\" v-if=\"incidents\">\n      <tr v-for=\"incident in incidents\" :key=\"incident.id\">\n        <th scope=\"row\"> {{ incident.ref }}</th>\n        <td> {{ format_date(incident.startDate) }} - {{ format_date(incident.endDate) }}</td>\n        <td> {{ incident.status }}</td>\n        <td :class=\"incident.dangerousness > 70.00 ? 'table-danger'\n            : incident.dangerousness > 40.00 ? 'table-warning': ''\"\n        > {{ incident.dangerousness }}%\n        </td>\n        <td> {{ incident.eventType }}</td>\n        <td class=\"text-center\"><span :class=\"incident.solved ? 'dot-true' : 'dot-false'\"></span></td>\n        <td>\n          <div class=\"action-div\">\n            <router-link :to=\"{ name: 'IncidentDetail', params: {id: incident.id}}\" class=\"action-link\"><img class=\"detail-img\" src=\"@/assets/img/information-button.svg\" alt=\"todo\"></router-link>\n            <button class=\"action-button\" v-if=\"incident.status === 'À prendre en charge'\">\n              <img class=\"to-do-img\" src=\"@/assets/img/to-do.svg\" alt=\"todo\">\n            </button>\n          </div>\n        </td>\n      </tr>\n      </tbody>\n      <tbody class=\"table-striped\" v-else>\n      <tr>\n        <td colspan=\"7\">Aucun incident pour l'instant</td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n\n</template>\n\n<script>\nimport $ from 'jquery'\nimport moment from 'moment'\n\n\nexport default {\n  name: \"Incident\",\n  el: \"#incident-table\",\n  data() {\n    return {\n      incidents: null\n    }\n  },\n  methods: {\n    //1\n    getIncidentData() {\n      fetch(\"/shield/incident/\")\n          .then(response => response.json())\n          .then((data) => {\n            let incidentList = [];\n            $.each(data, (incident) => {\n              incidentList.push(data[incident])\n            })\n            this.incidents = incidentList;\n          })\n          .catch(err => console.log(err.message));\n    },\n    //2\n    created() {\n      this.getIncidentData();\n\n    },\n    //3\n    format_date(value) {\n      if (value) {\n        return moment(String(value)).format('DD/MM/YYYY')\n      }\n    }\n  },\n  mounted() {\n    this.created()\n  }\n}\n</script>\n<style>\n.action-div {\n  display: flex;\n  align-content: center;\n  text-align: center;\n  vertical-align: center;\n}\n.to-do-img {\n  width: 30px;\n}\n\n.detail-img {\n  width: 30px;\n}\n</style>"],"sourceRoot":""}]}