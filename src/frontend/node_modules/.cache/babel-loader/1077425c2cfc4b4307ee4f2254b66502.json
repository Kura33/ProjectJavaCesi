{"remainingRequest":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/babel-loader/lib/index.js!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/IncidentDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/IncidentDetail.vue","mtime":1616364022183},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJJbmNpZGVudERldGFpbCIsCiAgcHJvcHM6IFsnaWQnXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5jaWRlbnQ6IG51bGwsCiAgICAgIGNvbW1lbnRzOiBudWxsLAogICAgICBzdXBlcmJlaW5nczogbnVsbCwKICAgICAgY2l2aWxzOiBudWxsLAogICAgICBvcmdhbmlzYXRpb25zOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8gMQogICAgZ2V0SW5jaWRlbnREZXRhaWxzOiBmdW5jdGlvbiBnZXRJbmNpZGVudERldGFpbHMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBmZXRjaCgiL3NoaWVsZC9pbmNpZGVudC8iICsgdGhpcy5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMuaW5jaWRlbnQgPSBkYXRhLmluY2lkZW50OwogICAgICAgIF90aGlzLmNvbW1lbnRzID0gZGF0YS5jb21tZW50czsKICAgICAgICBfdGhpcy5zdXBlcmJlaW5ncyA9IGRhdGEuc3VwZXJiZWluZ3M7CiAgICAgICAgX3RoaXMuY2l2aWxzID0gZGF0YS5jaXZpbHM7CiAgICAgICAgX3RoaXMub3JnYW5pc2F0aW9ucyA9IGRhdGEub3JnYW5pc2F0aW9uczsgLy8gY29uc29sZS5sb2coZGF0YS5pbmNpZGVudCkKCiAgICAgICAgY29uc29sZS5sb2coX3RoaXMuaW5jaWRlbnQpOyAvLyBjb25zb2xlLmxvZyhkYXRhLmNvbW1lbnRzKQoKICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5jb21tZW50cyk7IC8vIGNvbnNvbGUubG9nKGRhdGEuc3VwZXJiZWluZ3MpCgogICAgICAgIGNvbnNvbGUubG9nKF90aGlzLnN1cGVyYmVpbmdzKTsgLy8gY29uc29sZS5sb2coZGF0YS5jaXZpbHMpCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jaXZpbHMpCiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5vcmdhbmlzYXRpb25zKQogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMub3JnYW5pc2F0aW9ucykKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vMgogICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgdGhpcy5nZXRJbmNpZGVudERldGFpbHMoKTsKICAgIH0sCiAgICAvLyAzCiAgICBiYWNrd2FyZDogZnVuY3Rpb24gYmFja3dhcmQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICB9LAogICAgLy80CiAgICBmb3JtYXRfZGF0ZTogZnVuY3Rpb24gZm9ybWF0X2RhdGUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIG1vbWVudChTdHJpbmcodmFsdWUpKS5mb3JtYXQoJ0REL01NL1lZWVknKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuY3JlYXRlZCgpOwogIH0KfTs="},{"version":3,"sources":["/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/IncidentDetail.vue"],"names":[],"mappings":";AAgEA,OAAO,MAAP,MAAmB,QAAnB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,gBADO;AAEb,EAAA,KAAK,EAAE,CAAC,IAAD,CAFM;AAGb,EAAA,IAHa,kBAGN;AACL,WAAO;AACL,MAAA,QAAQ,EAAE,IADL;AAEL,MAAA,QAAQ,EAAE,IAFL;AAGL,MAAA,WAAW,EAAE,IAHR;AAIL,MAAA,MAAM,EAAE,IAJH;AAKL,MAAA,aAAa,EAAE;AALV,KAAP;AAOD,GAXY;AAYb,EAAA,OAAO,EAAE;AACP;AACA,IAAA,kBAFO,gCAEc;AAAA;;AACnB,MAAA,KAAK,CAAC,sBAAsB,KAAK,EAA5B,CAAL,CACK,IADL,CACU,UAAA,QAAO;AAAA,eAAK,QAAQ,CAAC,IAAT,EAAL;AAAA,OADjB,EAEK,IAFL,CAEU,UAAA,IAAG,EAAK;AACZ,QAAA,KAAI,CAAC,QAAL,GAAgB,IAAI,CAAC,QAArB;AACA,QAAA,KAAI,CAAC,QAAL,GAAgB,IAAI,CAAC,QAArB;AACA,QAAA,KAAI,CAAC,WAAL,GAAmB,IAAI,CAAC,WAAxB;AACA,QAAA,KAAI,CAAC,MAAL,GAAc,IAAI,CAAC,MAAnB;AACA,QAAA,KAAI,CAAC,aAAL,GAAqB,IAAI,CAAC,aAA1B,CALY,CAMZ;;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,QAAjB,EAPY,CAQZ;;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,QAAjB,EATY,CAUZ;;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,WAAjB,EAXY,CAYZ;AACA;AACA;AACA;AAED,OAnBL,EAoBK,KApBL,CAoBW,UAAA,GAAE;AAAA,eAAK,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,OAAhB,CAAL;AAAA,OApBb;AAqBD,KAxBM;AAyBP;AACA,IAAA,OA1BO,qBA0BG;AACR,WAAK,kBAAL;AAED,KA7BM;AA8BP;AACA,IAAA,QA/BO,sBA+BI;AACT,WAAK,OAAL,CAAa,EAAb,CAAgB,CAAC,CAAjB;AACD,KAjCM;AAkCP;AACA,IAAA,WAnCO,uBAmCK,KAnCL,EAmCY;AACjB,UAAI,KAAJ,EAAW;AACT,eAAO,MAAM,CAAC,MAAM,CAAC,KAAD,CAAP,CAAN,CAAsB,MAAtB,CAA6B,YAA7B,CAAP;AACF;AACF;AAvCO,GAZI;AAsDb,EAAA,OAtDa,qBAsDH;AACR,SAAK,OAAL;AACF;AAxDa,CAAf","sourcesContent":["<template>\n\n  <div class=\"page-content p-5\">\n    <button @click=\"backward\" class=\"back-btn btn btn-secondary mb-2\">Retour</button>\n    <div class=\"grid-container\">\n      <div class=\"incident-information\">\n        <div class=\"info-nav pl-2 text-white\">INFORMATIONS</div>\n        <div class=\"info-content px-2 grid-container-incident-info\" v-if=\"incident\">\n          <div class=\"grid-item grid-item-1\"><span>RÉFÉRENCE : </span><span>{{ incident.ref }}</span></div>\n          <div class=\"grid-item grid-item-2\"><span>DATE DE DÉBUT : </span><span>{{ format_date(incident.startDate) }}</span></div>\n          <div class=\"grid-item grid-item-3\">\n            <span>DATE DE FIN : </span><span>{{ incident.endDate ? format_date(incident.endDate) : ' -' }}</span></div>\n          <div class=\"grid-item grid-item-4\"><span>STATUT : </span><span>{{ incident.status }}</span></div>\n          <div class=\"grid-item grid-item-5\"><span>DANGEROSITÉ : </span><span>{{ incident.dangerousness }}%</span></div>\n          <div class=\"grid-item grid-item-6\"><span>RÉSOLU : </span><span\n              :class=\"incident.solved ? 'text-success' : 'text-danger'\"> {{ incident.solved ? 'OUI' : 'NON' }}</span>\n          </div>\n          <div class=\"grid-item grid-item-7\"><span>DÉCLARÉE PAR : </span><span>{{ incident.declaredBy }}</span></div>\n          <div class=\"grid-item grid-item-8\"><span>RÉDIGÉE PAR : </span><span>{{ incident.redactedBy }}</span></div>\n          <div class=\"grid-item grid-item-9\"><span>TYPE D'INCIDENT : </span><span>{{ incident.eventType }}</span></div>\n        </div>\n        <div class=\"info-content px-2\" v-else>No informations available for this incident</div>\n      </div>\n      <div class=\"comment-information\">\n        <table class=\"table table-bordered table-hover table-sm\" id=\"incident-table\">\n          <thead class=\"text-light\">\n          <tr>\n            <th scope=\"col\">COMMENTAIRES</th>\n          </tr>\n          </thead>\n\n          <tbody class=\"table-striped\" v-if=\"comments\">\n          <tr v-for=\"comment in comments\" :key=\"comment.id\">\n            <td>{{ comment.comments }}</td>\n          </tr>\n          </tbody>\n          <tbody class=\"table-striped\" v-else>\n          <tr>\n            <td colspan=\"7\">Aucun incident pour l'instant</td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n\n\n  <div v-if=\"superbeings\">\n\n    <div v-for=\"superbeing in superbeings\" :key=\"superbeing.id\"><span>{{ superbeing }}</span></div>\n  </div>\n  <div v-if=\"civils\">\n    <div v-for=\"civil in civils\" :key=\"civil.id\"><span>{{ civil }}</span></div>\n  </div>\n  <div v-if=\"organisations\">\n    <div v-for=\"organisation in organisations\" :key=\"organisation.id\">\n      <span>{{ organisation }}</span>\n    </div>\n  </div>\n\n</template>\n\n<script>\n\nimport moment from \"moment\";\n\nexport default {\n  name: \"IncidentDetail\",\n  props: ['id'],\n  data() {\n    return {\n      incident: null,\n      comments: null,\n      superbeings: null,\n      civils: null,\n      organisations: null,\n    }\n  },\n  methods: {\n    // 1\n    getIncidentDetails() {\n      fetch(\"/shield/incident/\" + this.id)\n          .then(response => response.json())\n          .then(data => {\n            this.incident = data.incident;\n            this.comments = data.comments;\n            this.superbeings = data.superbeings;\n            this.civils = data.civils;\n            this.organisations = data.organisations;\n            // console.log(data.incident)\n            console.log(this.incident)\n            // console.log(data.comments)\n            console.log(this.comments)\n            // console.log(data.superbeings)\n            console.log(this.superbeings)\n            // console.log(data.civils)\n            // console.log(this.civils)\n            // console.log(data.organisations)\n            // console.log(this.organisations)\n\n          })\n          .catch(err => console.log(err.message));\n    },\n    //2\n    created() {\n      this.getIncidentDetails();\n\n    },\n    // 3\n    backward() {\n      this.$router.go(-1)\n    },\n    //4\n    format_date(value) {\n      if (value) {\n        return moment(String(value)).format('DD/MM/YYYY')\n      }\n    }\n\n  },\n  mounted() {\n    this.created()\n  }\n}\n</script>\n\n<style>\n.table > thead {\n  background-color: #132141;\n}\n\n.grid-container {\n  display: grid;\n  gap: 20px 20px;\n  grid-template-areas:\n    \"incident being .\"\n    \"comment media location\";\n}\n\n.incident-information {\n  grid-area: incident;\n  /*height: 26vh;*/\n  /*width: 45vw;*/\n}\n\n.comment-information {\n  grid-area: comment;\n  /*height: 26vh;*/\n  /*width: 45vw;*/\n}\n\n.grid-container-incident-info {\n  display: grid;\n  gap: 10px 20px;\n  grid-template-areas:\n    \"first1 second1\"\n    \"first2 second2\"\n    \"first3 second3\"\n    \"first4 second4\"\n    \"first5 second5\"\n    \"first6 second6\"\n    \"first7 second7\"\n    \"first8 second8\"\n    \"first9 second9\"\n}\n\n.grid-item-1 {\n  grid-area: first1;\n}\n\n.grid-item-1 > span:nth-child(2) {\n  font-weight: bold;\n}\n\n.grid-item-2 {\n  grid-area: first2;\n}\n\n.grid-item-3 {\n  grid-area: first3;\n}\n\n.grid-item-4 {\n  grid-area: first4;\n}\n\n.grid-item-5 {\n  grid-area: first5;\n}\n\n.grid-item-6 {\n  grid-area: first6;\n}\n\n.grid-item-7 {\n  grid-area: second1;\n}\n\n.grid-item-8 {\n  grid-area: second2;\n}\n\n.grid-item-9 {\n  grid-area: second3;\n}\n\n.info-nav {\n  height: 50px;\n  background-color: #132141;\n  display: flex;\n  align-items: center;\n}\n\n</style>\n"],"sourceRoot":""}]}