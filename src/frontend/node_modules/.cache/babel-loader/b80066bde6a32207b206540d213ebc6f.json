{"remainingRequest":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/babel-loader/lib/index.js!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/store/modules/auth.js","dependencies":[{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/store/modules/auth.js","mtime":1616530282203},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvR2FiZS9EZXNrdG9wL3Byb2pldF9qYXZhL1Byb2plY3RKYXZhQ2VzaS9zcmMvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCnZhciBfYWN0aW9ucywgX211dGF0aW9uczsKCmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwoKLyogZXNsaW50LWRpc2FibGUgcHJvbWlzZS9wYXJhbS1uYW1lcyAqLwppbXBvcnQgeyBBVVRIX1JFUVVFU1QsIEFVVEhfRVJST1IsIEFVVEhfU1VDQ0VTUywgQVVUSF9MT0dPVVQgfSBmcm9tICIuLi9hY3Rpb25zL2F1dGgiOwppbXBvcnQgeyBVU0VSX1JFUVVFU1QgfSBmcm9tICIuLi9hY3Rpb25zL3VzZXIiOwppbXBvcnQgYXBpQ2FsbCBmcm9tICJ1dGlscy9hcGkiOwp2YXIgc3RhdGUgPSB7CiAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyLXRva2VuIikgfHwgIiIsCiAgc3RhdHVzOiAiIiwKICBoYXNMb2FkZWRPbmNlOiBmYWxzZQp9Owp2YXIgZ2V0dGVycyA9IHsKICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChzdGF0ZSkgewogICAgcmV0dXJuICEhc3RhdGUudG9rZW47CiAgfSwKICBhdXRoU3RhdHVzOiBmdW5jdGlvbiBhdXRoU3RhdHVzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuc3RhdHVzOwogIH0KfTsKdmFyIGFjdGlvbnMgPSAoX2FjdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBBVVRIX1JFUVVFU1QsIGZ1bmN0aW9uIChfcmVmLCB1c2VyKSB7CiAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIGNvbW1pdChBVVRIX1JFUVVFU1QpOwogICAgYXBpQ2FsbCh7CiAgICAgIHVybDogImF1dGgiLAogICAgICBkYXRhOiB1c2VyLAogICAgICBtZXRob2Q6ICJQT1NUIgogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlci10b2tlbiIsIHJlc3AudG9rZW4pOyAvLyBIZXJlIHNldCB0aGUgaGVhZGVyIG9mIHlvdXIgYWpheCBsaWJyYXJ5IHRvIHRoZSB0b2tlbiB2YWx1ZS4KICAgICAgLy8gZXhhbXBsZSB3aXRoIGF4aW9zCiAgICAgIC8vIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSByZXNwLnRva2VuCgogICAgICBjb21taXQoQVVUSF9TVUNDRVNTLCByZXNwKTsKICAgICAgZGlzcGF0Y2goVVNFUl9SRVFVRVNUKTsKICAgICAgcmVzb2x2ZShyZXNwKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgY29tbWl0KEFVVEhfRVJST1IsIGVycik7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VyLXRva2VuIik7CiAgICAgIHJlamVjdChlcnIpOwogICAgfSk7CiAgfSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIEFVVEhfTE9HT1VULCBmdW5jdGlvbiAoX3JlZjIpIHsKICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgY29tbWl0KEFVVEhfTE9HT1VUKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VyLXRva2VuIik7CiAgICByZXNvbHZlKCk7CiAgfSk7Cn0pLCBfYWN0aW9ucyk7CnZhciBtdXRhdGlvbnMgPSAoX211dGF0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgQVVUSF9SRVFVRVNULCBmdW5jdGlvbiAoc3RhdGUpIHsKICBzdGF0ZS5zdGF0dXMgPSAibG9hZGluZyI7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgQVVUSF9TVUNDRVNTLCBmdW5jdGlvbiAoc3RhdGUsIHJlc3ApIHsKICBzdGF0ZS5zdGF0dXMgPSAic3VjY2VzcyI7CiAgc3RhdGUudG9rZW4gPSByZXNwLnRva2VuOwogIHN0YXRlLmhhc0xvYWRlZE9uY2UgPSB0cnVlOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIEFVVEhfRVJST1IsIGZ1bmN0aW9uIChzdGF0ZSkgewogIHN0YXRlLnN0YXR1cyA9ICJlcnJvciI7CiAgc3RhdGUuaGFzTG9hZGVkT25jZSA9IHRydWU7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgQVVUSF9MT0dPVVQsIGZ1bmN0aW9uIChzdGF0ZSkgewogIHN0YXRlLnRva2VuID0gIiI7Cn0pLCBfbXV0YXRpb25zKTsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/store/modules/auth.js"],"names":["AUTH_REQUEST","AUTH_ERROR","AUTH_SUCCESS","AUTH_LOGOUT","USER_REQUEST","apiCall","state","token","localStorage","getItem","status","hasLoadedOnce","getters","isAuthenticated","authStatus","actions","user","commit","dispatch","Promise","resolve","reject","url","data","method","then","resp","setItem","catch","err","removeItem","mutations"],"mappings":"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","sourcesContent":["/* eslint-disable promise/param-names */\nimport {\n  AUTH_REQUEST,\n  AUTH_ERROR,\n  AUTH_SUCCESS,\n  AUTH_LOGOUT\n} from \"../actions/auth\";\nimport { USER_REQUEST } from \"../actions/user\";\nimport apiCall from \"utils/api\";\n\nconst state = {\n  token: localStorage.getItem(\"user-token\") || \"\",\n  status: \"\",\n  hasLoadedOnce: false\n};\n\nconst getters = {\n  isAuthenticated: state => !!state.token,\n  authStatus: state => state.status\n};\n\nconst actions = {\n  [AUTH_REQUEST]: ({ commit, dispatch }, user) => {\n    return new Promise((resolve, reject) => {\n      commit(AUTH_REQUEST);\n      apiCall({ url: \"auth\", data: user, method: \"POST\" })\n        .then(resp => {\n          localStorage.setItem(\"user-token\", resp.token);\n          // Here set the header of your ajax library to the token value.\n          // example with axios\n          // axios.defaults.headers.common['Authorization'] = resp.token\n          commit(AUTH_SUCCESS, resp);\n          dispatch(USER_REQUEST);\n          resolve(resp);\n        })\n        .catch(err => {\n          commit(AUTH_ERROR, err);\n          localStorage.removeItem(\"user-token\");\n          reject(err);\n        });\n    });\n  },\n  [AUTH_LOGOUT]: ({ commit }) => {\n    return new Promise(resolve => {\n      commit(AUTH_LOGOUT);\n      localStorage.removeItem(\"user-token\");\n      resolve();\n    });\n  }\n};\n\nconst mutations = {\n  [AUTH_REQUEST]: state => {\n    state.status = \"loading\";\n  },\n  [AUTH_SUCCESS]: (state, resp) => {\n    state.status = \"success\";\n    state.token = resp.token;\n    state.hasLoadedOnce = true;\n  },\n  [AUTH_ERROR]: state => {\n    state.status = \"error\";\n    state.hasLoadedOnce = true;\n  },\n  [AUTH_LOGOUT]: state => {\n    state.token = \"\";\n  }\n};\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n};\n"]}]}