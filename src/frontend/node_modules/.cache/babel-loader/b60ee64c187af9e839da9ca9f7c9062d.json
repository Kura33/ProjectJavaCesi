{"remainingRequest":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/babel-loader/lib/index.js!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/Incident.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/Incident.vue","mtime":1616938056894},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9HYWJlL0Rlc2t0b3AvcHJvamV0X2phdmEvUHJvamVjdEphdmFDZXNpL3NyYy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8gaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSW5jaWRlbnQiLAogIGVsOiAiI2luY2lkZW50LXRhYmxlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5jaWRlbnRzOiBudWxsLAogICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXItdG9rZW4nKQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWRJbmNpZGVudHM6IGZ1bmN0aW9uIGxvYWRJbmNpZGVudHMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldCgiL3NoaWVsZC9pbmNpZGVudC8iLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luIjogIioiLAogICAgICAgICAgICAgICAgICAgICJBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscyI6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuaW5jaWRlbnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8yCiAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgICB0aGlzLmxvYWRJbmNpZGVudHMoKTsKICAgIH0sCiAgICAvLzMKICAgIGZvcm1hdF9kYXRlOiBmdW5jdGlvbiBmb3JtYXRfZGF0ZSh2YWx1ZSkgewogICAgICBpZiAodmFsdWUpIHsKICAgICAgICByZXR1cm4gbW9tZW50KFN0cmluZyh2YWx1ZSkpLmZvcm1hdCgnREQvTU0vWVlZWScpOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5jcmVhdGVkKCk7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/Gabe/Desktop/projet_java/ProjectJavaCesi/src/frontend/src/views/incident/Incident.vue"],"names":[],"mappings":";;AAwEA;AACA,OAAO,MAAP,MAAmB,QAAnB;AACA,OAAO,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,UADO;AAEb,EAAA,EAAE,EAAE,iBAFS;AAGb,EAAA,IAHa,kBAGN;AACL,WAAO;AACL,MAAA,SAAS,EAAE,IADN;AAEL,MAAA,KAAK,EAAE,YAAY,CAAC,OAAb,CAAqB,YAArB;AAFF,KAAP;AAID,GARY;AASb,EAAA,OAAO,EAAE;AACD,IAAA,aADC,2BACe;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACd,KAAK,CAAC,GAAN,CAAU,mBAAV,EAA+B;AACnC,kBAAA,OAAO,EAAE;AACP,mDAA+B,GADxB;AAEP,wDAAoC,IAF7B;AAGP,oBAAA,aAAa,EAAE,YAAY,YAAY,CAAC,OAAb,CAAqB,OAArB;AAHpB;AAD0B,iBAA/B,EAOL,IAPK,CAOA,UAAA,QAAO,EAAK;AAChB,kBAAA,KAAI,CAAC,SAAL,GAAiB,QAAQ,CAAC,IAA1B;AACD,iBATK,CADc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYrB,KAbM;AAcP;AACA,IAAA,OAfO,qBAeG;AACR,WAAK,aAAL;AAED,KAlBM;AAmBP;AACA,IAAA,WApBO,uBAoBK,KApBL,EAoBY;AACjB,UAAI,KAAJ,EAAW;AACT,eAAO,MAAM,CAAC,MAAM,CAAC,KAAD,CAAP,CAAN,CAAsB,MAAtB,CAA6B,YAA7B,CAAP;AACF;AACF;AAxBO,GATI;AAmCb,EAAA,OAnCa,qBAmCH;AACR,SAAK,OAAL;AACF;AArCa,CAAf","sourcesContent":["<template>\n  <div class=\"page-content p-5\">\n  <button class=\"back-btn btn btn-secondary mb-2\">\n    <router-link :to=\"{ name: 'IncidentCreation'}\">\n      Créer un incident</router-link>\n  </button>\n\n  <div class=\"table-responsive\">\n    <div class=\"legende\">\n      <div>\n        <h4>Dangerosité</h4>\n        <div>\n          <span>Attention : Jaune : Au dessus de 40%</span>\n        </div>\n        <div>\n          <span>Critique : Rouge : Au dessus de 70%</span>\n        </div>\n      </div>\n      <div>\n        <h4>Résolu</h4>\n        <span>Vert : Oui</span><br>\n        <span>Rouge : Non</span>\n      </div>\n    </div>\n    <table class=\"table table-bordered table-hover table-sm\" id=\"incident-table\">\n      <thead class=\"thead-dark text-light\">\n      <tr>\n        <th scope=\"col\">Référence</th>\n        <th scope=\"col\">Timeframe de l'incident</th>\n        <th scope=\"col\">Statut</th>\n        <th scope=\"col\">Dangerosité</th>\n        <th scope=\"col\">Type d'incident</th>\n        <th scope=\"col\">Résolu</th>\n        <th scope=\"col\">Actions</th>\n      </tr>\n      </thead>\n\n      <tbody class=\"table-striped\" v-if=\"incidents\">\n      <tr v-for=\"incident in incidents\" :key=\"incident.id\">\n        <th scope=\"row\"> {{ incident.ref }}</th>\n        <td> {{ format_date(incident.startDate) }} - {{ format_date(incident.endDate) }}</td>\n        <td> {{ incident.status }}</td>\n        <td :class=\"incident.dangerousness > 70.00 ? 'table-danger'\n            : incident.dangerousness > 40.00 ? 'table-warning': ''\"\n        > {{ incident.dangerousness }}\n        </td>\n        <td> {{ incident.eventType }}</td>\n        <td class=\"text-center\"><span :class=\"incident.solved ? 'dot-true' : 'dot-false'\"></span></td>\n        <td>\n          <div class=\"action-div\">\n            <router-link :to=\"{ name: 'IncidentDetail', params: {id: incident.id}}\" class=\"action-link\"><img\n                class=\"detail-img\" src=\"@/assets/img/information-button.svg\" alt=\"todo\"></router-link>\n            <button class=\"action-button\" v-if=\"incident.status === 'À prendre en charge'\">\n              <img class=\"to-do-img\" src=\"@/assets/img/to-do.svg\" alt=\"todo\">\n            </button>\n          </div>\n        </td>\n      </tr>\n      </tbody>\n      <tbody class=\"table-striped\" v-else>\n      <tr>\n        <td colspan=\"7\">Aucun incident pour l'instant</td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n  <div>{{ token }}</div>\n\n  </div>\n</template>\n\n<script>\n// import $ from 'jquery'\nimport moment from 'moment'\nimport axios from \"axios\";\n\nexport default {\n  name: \"Incident\",\n  el: \"#incident-table\",\n  data() {\n    return {\n      incidents: null,\n      token: localStorage.getItem('user-token'),\n    }\n  },\n  methods: {\n    async loadIncidents() {\n      await axios.get(\"/shield/incident/\", {\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Credentials\": true,\n          Authorization: 'Bearer ' + localStorage.getItem(\"token\"),\n        }\n      })\n      .then(response => {\n        this.incidents = response.data\n      })\n\n    },\n    //2\n    created() {\n      this.loadIncidents();\n\n    },\n    //3\n    format_date(value) {\n      if (value) {\n        return moment(String(value)).format('DD/MM/YYYY')\n      }\n    }\n  },\n  mounted() {\n    this.created()\n  }\n}\n</script>\n<style>\n.action-div {\n  display: flex;\n  align-content: center;\n  text-align: center;\n  vertical-align: center;\n}\na {\n  text-decoration: none;\n  color: white;\n}\n\n.to-do-img {\n  width: 30px;\n}\n\n.detail-img {\n  width: 30px;\n}\n\n.legende{\n  display: flex;\n  justify-content: space-evenly;\n}\n</style>"],"sourceRoot":""}]}